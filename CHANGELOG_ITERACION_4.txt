â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ITERACIÃ“N 4: PERSISTENCIA, HTTPS Y FAVICONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… COMPLETADO EN ESTA ITERACIÃ“N:

1. PERSISTENCIA DE CARRITO
   âœ… Carrito se guarda en localStorage automÃ¡ticamente
   âœ… Se restaura al recargar pÃ¡gina o cerrar navegador
   âœ… SincronizaciÃ³n en tiempo real
   âœ… Manejo de errores robusto

2. HTTPS Y SEGURIDAD
   âœ… ConfiguraciÃ³n HTTPS en vite.config.ts
   âœ… Certificados autofirmados para desarrollo
   âœ… Headers de seguridad en index.html
   âœ… ConfiguraciÃ³n .htaccess para Apache
   âœ… ConfiguraciÃ³n Netlify (netlify.toml)
   âœ… ConfiguraciÃ³n Vercel (vercel.json)
   âœ… CSP (Content Security Policy)
   âœ… HSTS (HTTP Strict Transport Security)

3. FAVICONS Y PWA
   âœ… favicon.svg (icono responsivo)
   âœ… site.webmanifest (PWA manifest)
   âœ… Meta tags favicon en index.html
   âœ… Apple touch icon
   âœ… Theme color

4. HOOKS NUEVOS
   âœ… useFavicon() - Cambiar favicon dinÃ¡micamente
   âœ… useCartPersistence() - Persistencia manual
   âœ… useBeforeUnloadWarning() - Advertencia de cierre
   âœ… useOnlineStatus() - Detectar estado online/offline

5. SCRIPTS DE UTILIDAD
   âœ… generate-certs.sh (Linux/macOS)
   âœ… generate-certs.ps1 (Windows PowerShell)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ ARCHIVOS MODIFICADOS:

1. context/CartContext.tsx
   - Agregado: Cargar carrito desde localStorage
   - Agregado: Guardar carrito en localStorage con useEffect
   - Cambio: InicializaciÃ³n estatal desde localStorage
   
2. vite.config.ts
   - Agregado: Soporte HTTPS con certificados
   - Agregado: DetecciÃ³n de certs/cert.pem y certs/key.pem
   - Agregado: ConfiguraciÃ³n de proxy para APIs
   - Agregado: Build optimizations (rollupOptions)

3. index.html
   - Agregado: Meta tags de seguridad (CSP, X-Frame-Options, etc)
   - Agregado: References a favicons
   - Agregado: site.webmanifest link
   - Agregado: Preconnect/dns-prefetch
   - Mejorado: Headers de seguridad

4. App.tsx
   - Agregado: Import de useFavicon hook
   - Agregado: useFavicon('/favicon.svg')
   - Agregado: Favicon references en Helmet
   - Agregado: Manifest link en Helmet

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ ARCHIVOS CREADOS:

1. public/favicon.svg
   - Icono SVG azul con "D" de Diamante
   - Responsivo a diferentes tamaÃ±os
   - Color: #3b82f6 (azul diamante)

2. public/site.webmanifest
   - ConfiguraciÃ³n PWA
   - Nombre: Pinturas Diamante Oaxaca
   - Display: standalone
   - Iconos y screenshots incluidos

3. hooks/usePersistence.ts
   - useFavicon() - Cambiar favicon
   - useCartPersistence() - Persistencia manual
   - useBeforeUnloadWarning() - Advertencia cierre
   - useOnlineStatus() - Estado online/offline

4. generate-certs.sh
   - Script bash para generar certificados SSL
   - Para Linux/macOS

5. generate-certs.ps1
   - Script PowerShell para generar certificados
   - Para Windows

6. public/.htaccess
   - ConfiguraciÃ³n Apache
   - HTTPS forcing
   - Security headers
   - GZIP compression
   - SPA routing
   - Cache control

7. netlify.toml
   - ConfiguraciÃ³n para Netlify
   - Security headers
   - Redirects
   - Environment variables

8. vercel.json
   - ConfiguraciÃ³n para Vercel
   - Security headers
   - Rewrites
   - Cache settings

9. .env.example
   - Variables de entorno para desarrollo
   - GuÃ­a de configuraciÃ³n
   - Notas sobre certificados

10. PERSISTENCE_HTTPS_FAVICONS.ts
    - GuÃ­a completa de implementaciÃ³n
    - Ejemplos de cÃ³digo
    - Troubleshooting

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” DETALLES TÃ‰CNICOS:

PERSISTENCIA:
- Clave localStorage: 'diamante_cart'
- Formato: JSON stringificado del array de CartItem
- RestauraciÃ³n: En componente de raÃ­z (App.tsx)
- SincronizaciÃ³n: useEffect que escucha cambios en cart

HTTPS:
- Vite detecta certificados en ./certs/
- Se pueden generar con scripts incluidos
- En producciÃ³n: Netlify/Vercel manejan HTTPS
- CSP evita ataques XSS
- HSTS fuerza HTTPS por 1 aÃ±o

FAVICONS:
- SVG escalable a cualquier tamaÃ±o
- PWA manifest registra app como instalable
- Site.webmanifest define nombre y colores
- Meta tag theme-color sincroniza con browser

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ PRÃ“XIMOS PASOS:

1. Generar certificados locales:
   bash generate-certs.sh          (Linux/macOS)
   .\generate-certs.ps1            (Windows)

2. Agregar HTTPS a .env.local:
   HTTPS=true

3. Probar persistencia:
   - Agregar producto al carrito
   - Cerrar navegador
   - Reabrir - carrito debe persistir

4. Validar headers de seguridad:
   - Abrir DevTools > Network
   - Revisar Response Headers
   - Verificar: Strict-Transport-Security, X-Frame-Options

5. Deploy:
   - Netlify: netlify.toml ya configurado
   - Vercel: vercel.json ya configurado
   - Apache: .htaccess en public folder

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š SEGURIDAD IMPLEMENTADA:

Header                              Valor
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Strict-Transport-Security          max-age=31536000; includeSubDomains
X-Frame-Options                    SAMEORIGIN
X-Content-Type-Options             nosniff
X-XSS-Protection                   1; mode=block
Referrer-Policy                    strict-origin-when-cross-origin
Content-Security-Policy            Default: 'self' https:
Permissions-Policy                 Deshabilita: geolocation, microphone, camera

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¾ PERSISTENCIA IMPLEMENTADA:

Evento                  Almacenamiento     RecuperaciÃ³n
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Agregar producto       localStorage       AutomÃ¡tica al montar
Cambiar cantidad       localStorage       AutomÃ¡tica al montar
Remover producto       localStorage       AutomÃ¡tica al montar
Cerrar navegador       localStorage       Al reabrir
Incognito/Private      sessionStorage     Solo en sesiÃ³n actual
Errores de Storage     Fallback a RAM     Sin persistencia temporal

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ¨ BENEFICIOS:

1. UX MEJORADA:
   - Carrito nunca se pierde
   - Experiencia fluida entre sesiones
   - Menos frustraciÃ³n del usuario

2. SEGURIDAD:
   - HTTPS en desarrollo
   - Headers de seguridad estrictos
   - ProtecciÃ³n contra ataques comunes
   - CSP previene inyecciÃ³n de scripts

3. PWA READY:
   - Instalable en dispositivos
   - Icono personalizado
   - Splash screen personalizado
   - Modo offline parcial

4. COMPATIBILIDAD:
   - Funciona en todos los navegadores modernos
   - Fallback para localStorage
   - Detecta estado online/offline
   - Respeta modos incognito

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ§ª VALIDACIÃ“N:

En el navegador (DevTools > Console):

// Ver carrito guardado
localStorage.getItem('diamante_cart');

// Ver favicon cargado
document.querySelector('link[rel="icon"]')?.href;

// Ver PWA manifest
document.querySelector('link[rel="manifest"]')?.href;

// Ver security headers
fetch('/').then(r => {
  console.log(r.headers.get('Strict-Transport-Security'));
  console.log(r.headers.get('X-Frame-Options'));
});

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“± PWA FEATURES:

âœ… Instalable en home screen
âœ… Icono personalizado (D azul)
âœ… Nombre: Pinturas Diamante Oaxaca
âœ… Modo standalone (sin barra de navegador)
âœ… Splash screen personalizado
âœ… Theme color sincronizado
âœ… Display mode: standalone

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ ESTADO FINAL:

Fase 1: ImÃ¡genes                     âœ… COMPLETADA
Fase 2: SEO                          âœ… COMPLETADA
Fase 3: Helmet + SSR                 âœ… COMPLETADA (60%)
Fase 4: Persistencia + HTTPS         âœ… COMPLETADA

Estado Global: 70% COMPLETADO

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ SOPORTE:

Consulta estos archivos para detalles:
- PERSISTENCE_HTTPS_FAVICONS.ts (guÃ­a tÃ©cnica)
- generate-certs.sh / .ps1 (generar certificados)
- netlify.toml / vercel.json (deploy)
- .env.example (configuraciÃ³n)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Fecha: 5 de febrero de 2026
Ãšltima actualizaciÃ³n: Persistencia, HTTPS, Favicons
Siguiente: Optimizaciones finales y deploy
